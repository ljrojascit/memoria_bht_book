<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Memoria de Cálculo MBHT - 6&nbsp; Consolidación de Dimensiones</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./accesibilidad.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./consolidacion.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Consolidación de Dimensiones</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Memoria de Cálculo MBHT</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./socioeconomico.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Dimensión Socioeconómica</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ambiental.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Dimensión Ambiental</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seguridad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Dimensión Seguridad</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accesibilidad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Dimensión Accesibilidad</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./consolidacion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Consolidación de Dimensiones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#resumen" id="toc-resumen" class="nav-link active" data-scroll-target="#resumen"><span class="header-section-number">6.1</span> Resumen</a></li>
  <li><a href="#insumos" id="toc-insumos" class="nav-link" data-scroll-target="#insumos"><span class="header-section-number">6.2</span> Insumos</a>
  <ul class="collapse">
  <li><a href="#listado-de-dimensiones-y-variables" id="toc-listado-de-dimensiones-y-variables" class="nav-link" data-scroll-target="#listado-de-dimensiones-y-variables"><span class="header-section-number">6.2.1</span> Listado de Dimensiones y Variables</a></li>
  </ul></li>
  <li><a href="#proceso" id="toc-proceso" class="nav-link" data-scroll-target="#proceso"><span class="header-section-number">6.3</span> Proceso</a>
  <ul class="collapse">
  <li><a href="#imputación-de-valores-por-vecinos" id="toc-imputación-de-valores-por-vecinos" class="nav-link" data-scroll-target="#imputación-de-valores-por-vecinos"><span class="header-section-number">6.3.1</span> Imputación de valores por vecinos</a></li>
  <li><a href="#consolidacion-de-dimensiones" id="toc-consolidacion-de-dimensiones" class="nav-link" data-scroll-target="#consolidacion-de-dimensiones"><span class="header-section-number">6.3.2</span> Consolidacion de Dimensiones</a></li>
  <li><a href="#consolidación-de-indicador-compuesto" id="toc-consolidación-de-indicador-compuesto" class="nav-link" data-scroll-target="#consolidación-de-indicador-compuesto"><span class="header-section-number">6.3.3</span> Consolidación de Indicador Compuesto</a></li>
  <li><a href="#análisis-de-cluster" id="toc-análisis-de-cluster" class="nav-link" data-scroll-target="#análisis-de-cluster"><span class="header-section-number">6.3.4</span> Análisis de Cluster</a></li>
  </ul></li>
  <li><a href="#aplicación" id="toc-aplicación" class="nav-link" data-scroll-target="#aplicación"><span class="header-section-number">6.4</span> Aplicación</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Consolidación de Dimensiones</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><img src="images/logo-mbht.png" class="img-fluid"></p>
<section id="resumen" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="resumen"><span class="header-section-number">6.1</span> Resumen</h2>
<p>En esta sección se muestran los pasos finales en la construcción del indicador de bienestar humano territorial. Este paso toma todos los indicadores ya calculados y los procesa para la construcción de un indicador compuesto. Las principales características de este es ser un indicador que releva la locación de los fenómenos y las relaciones de vecindad que existen en el territorio.</p>
<p>Un indicador compuesto se define como una combinación matemática de un conjunto de indicadores individuales que representan distintos componentes de un fenómeno multidimensional. Comúnmente los análisis de indicadores compuestos operan sobre promedios de unidades administrativas o nacionales. Sin embargo, rara vez los fenómenos sociales, económicos y ambientales siguen una distribución uniforme dentro de estas unidades. Por lo tanto, incorporar la dimensión espacial de las variables permite enriquecer los modelos y el poder analítico de los indicadores compuestos <span class="citation" data-cites="troguSpatialCompositeIndicators2018">(<a href="references.html#ref-troguSpatialCompositeIndicators2018" role="doc-biblioref">Trogu and Campagna 2018</a>)</span>.</p>
<p>Al incorporar la locación en el análisis es posible relevar las relaciones de vecindad entre observaciones. Estas ponen de relieve relaciones de dependencia espacial y heterogeneidad espacial, las cuales invalidan la hipótesis de independencia espacial entre las variables, por lo que es necesario incorporar técnicas de estadística espacial al análisis <span class="citation" data-cites="anselinWhatSpecialSpatial1989">(<a href="references.html#ref-anselinWhatSpecialSpatial1989" role="doc-biblioref">Anselin 1989</a>)</span>. Estas buscan profundizar en los patrones espaciales de las variables, detectando clustersy regiones de contagio <span class="citation" data-cites="getis1999spatial">(<a href="references.html#ref-getis1999spatial" role="doc-biblioref">Getis 1999</a>)</span>.</p>
<p>Existe numerosa literatura que busca resumir y recomendar los pasos en la construcción de indicadores compuestos <span class="citation" data-cites="joint2008handbook soto2009guia">(<a href="references.html#ref-joint2008handbook" role="doc-biblioref">Commission et al. 2008</a>; <a href="references.html#ref-soto2009guia" role="doc-biblioref">Soto de la Rosa and Schuschny 2009</a>)</span> los cuales hacen énfasis en los pasos de análisis de las variables y las unidades de análisis, buscando agrupaciones de variables o de observaciones que se comportan de forma similar. Estos pasos permiten extenderse y usar técnicas de estadística espacial en el contexto de indicadores en el territorio <span class="citation" data-cites="troguSpatialCompositeIndicators2018">(<a href="references.html#ref-troguSpatialCompositeIndicators2018" role="doc-biblioref">Trogu and Campagna 2018</a>)</span>. En esta literatura se encuentra también una discusión sobre los métodos de agregación y el trade off entre la complejidad de estos y la comunicabilidad de los resultados.</p>
</section>
<section id="insumos" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="insumos"><span class="header-section-number">6.2</span> Insumos</h2>
<p>Los insumos para la consolidación de este proceso son los indicadores ya calculados de las dimensiones que componen la Matriz de Bienestar Humano Territorial (MBHT):</p>
<ul>
<li><p>Dimensión Socioeconómica</p></li>
<li><p>Dimensión Ambiental</p></li>
<li><p>Dimensión Seguridad</p></li>
<li><p>Dimensión Accesibilidad</p></li>
</ul>
<section id="listado-de-dimensiones-y-variables" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="listado-de-dimensiones-y-variables"><span class="header-section-number">6.2.1</span> Listado de Dimensiones y Variables</h3>
<p>A continuación se presenta un resumen de las variables que componen la Matriz de Bienestar Humano Territorial (MBHT), indicando la dimensión a la que pertecen, el tipo de dato, los valores que presentan y la fuente con la temporalidad relevante.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Dimension</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Indicador</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Nombre Indicador</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Tipo de Dato</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Valores</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Fuente y Temporalidad</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SOCIOECONÓMICA</td>
<td style="text-align: left;">IEJ</td>
<td style="text-align: left;">Indicador Escolaridad de Jefe de Hogar</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Entre 0 y 21</td>
<td style="text-align: left;">Calculado en base a último censo (INE 2017)</td>
</tr>
<tr class="even">
<td style="text-align: left;">SOCIOECONÓMICA</td>
<td style="text-align: left;">IRH</td>
<td style="text-align: left;">Indicador de Resiliencia de Hogares</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Calculado en base a último censo (INE 2017)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SOCIOECONÓMICA</td>
<td style="text-align: left;">IEM</td>
<td style="text-align: left;">Indicador de Empleo</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Calculado en base a último censo (INE 2017)</td>
</tr>
<tr class="even">
<td style="text-align: left;">SOCIOECONÓMICA</td>
<td style="text-align: left;">IPJ</td>
<td style="text-align: left;">Indicador de Participación Juvenil en Empleo y Estudio</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Calculado en base a último censo (INE 2017)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SOCIOECONÓMICA</td>
<td style="text-align: left;">ISV</td>
<td style="text-align: left;">Indicador de Suficiencia de Viviendas</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Calculado en base a último censo (INE 2017)</td>
</tr>
<tr class="even">
<td style="text-align: left;">SOCIOECONÓMICA</td>
<td style="text-align: left;">IVI</td>
<td style="text-align: left;">Indicador de Calidad de la Vivienda</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Calculado en base a último censo (INE 2017)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SEGURIDAD</td>
<td style="text-align: left;">IGPE</td>
<td style="text-align: left;">Indicador de Delitos Grave Personas</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Datos de delitos de 2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">SEGURIDAD</td>
<td style="text-align: left;">IGPR</td>
<td style="text-align: left;">Indicador de Delitos Graves Propiedad</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Datos de delitos de 2021</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SEGURIDAD</td>
<td style="text-align: left;">ILPE</td>
<td style="text-align: left;">Indicador de Delitos Leves Personas</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Datos de delitos de 2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">SEGURIDAD</td>
<td style="text-align: left;">ILPR</td>
<td style="text-align: left;">Indicador de Delitos Leves Propiedad</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">valor entre 0 y 1</td>
<td style="text-align: left;">Datos de delitos de 2021</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMBIENTAL</td>
<td style="text-align: left;">IATA</td>
<td style="text-align: left;">Indicador de Amplitud Térmica</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Mayor a 0</td>
<td style="text-align: left;">Datos satelitales del territorio nacional de 2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMBIENTAL</td>
<td style="text-align: left;">ICV</td>
<td style="text-align: left;">Indicador de Cobertura Vegetal</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">entre 0 y 100</td>
<td style="text-align: left;">Datos satelitales del territorio nacional de 2021</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ACCESIBILIDAD</td>
<td style="text-align: left;">ICUL</td>
<td style="text-align: left;">Accesibilidad a Cultura</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Mayor a 0</td>
<td style="text-align: left;">Levantamiento de Información CIT 2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACCESIBILIDAD</td>
<td style="text-align: left;">IAV</td>
<td style="text-align: left;">Accesibilidad a Áreas Verdes</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Mayor a 0</td>
<td style="text-align: left;">Levantamiento de Información CIT 2021</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ACCESIBILIDAD</td>
<td style="text-align: left;">ISAL</td>
<td style="text-align: left;">Accesiblidad a Salud</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Mayor a 0</td>
<td style="text-align: left;">Levantamiento de Información CIT 2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACCESIBILIDAD</td>
<td style="text-align: left;">IDEP</td>
<td style="text-align: left;">Accesibilidad a Deportes</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Mayor a 0</td>
<td style="text-align: left;">Levantamiento de Información CIT 2021</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ACCESIBILIDAD</td>
<td style="text-align: left;">ISER</td>
<td style="text-align: left;">Accesibilidad a Servicios Públicos</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Mayor a 0</td>
<td style="text-align: left;">Levantamiento de Información CIT 2021</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACCESIBILIDAD</td>
<td style="text-align: left;">ISE</td>
<td style="text-align: left;">Accesibilidad a Servicios de Educación</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">Mayor a 0</td>
<td style="text-align: left;">Levantamiento de Información CIT 2021</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="proceso" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="proceso"><span class="header-section-number">6.3</span> Proceso</h2>
<p>El proceso de cálculo y consolidación toma como entrada los indicadores ya calculados y comienza por analizar los valores faltantes (indicadores que se indefinen porque no existe población relevante en la manzana) e imputar valores a partir de los vecinos de las manzanas. Luego, con el objetivo de consolidar las dimensiones, se normalizan los indicadores y se invierten cuando sea el caso, con el objetivo de expresarlos en una escala consistente.</p>
<p><img src="images/diagrama-consolidacion-01.PNG" class="img-fluid"></p>
<p>El indicador compuesto se construye a partir de las dimensiones ya consolidadas. Luego de esto se analiza el patrón espacial de bienestar, mediante un análisis de clúster geográfico que identifica territorios de alto y bajo bienestar.</p>
<p>A continuación se explica en mayor detalle cada subproceso.</p>
<section id="imputación-de-valores-por-vecinos" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="imputación-de-valores-por-vecinos"><span class="header-section-number">6.3.1</span> Imputación de valores por vecinos</h3>
<p>Debido a que los indicadores hacen referencia a la población y que existen casos de manzanas en el territorio que no cuentan con información poblacional, es que en estos casos los indicadores que hacen referencia a esta población se indefinen. Es por esto y con el objetivo de no excluir territorios del análisis, que se asignan valores de indicadores a estas manzanas.</p>
<p>El método usado es una interpolación por inverso de distancia, y consiste en identificar las manzanas vecinas con información del indicador en cuestión. A partir de lo cual se construye un promedio ponderado por el inverso de la distancia. Es decir que las manzanas más cercanas cuentan con mayor peso en el cálculo del valor que se imputa en la manzana.</p>
</section>
<section id="consolidacion-de-dimensiones" class="level3" data-number="6.3.2">
<h3 data-number="6.3.2" class="anchored" data-anchor-id="consolidacion-de-dimensiones"><span class="header-section-number">6.3.2</span> Consolidacion de Dimensiones</h3>
<p>La consolidación de las dimensiones es un proceso que se realiza para los indicadores que componen cada dimensión. Esto implica normalizar la escala de análisis y en algunos casos aplicar transformaciones a la serie de datos originales.</p>
<p>El objetivo de las transformaciones es evitar el impacto desmedido que puedan tener observaciones atípicas o outliers. Esto es particularmente relevante para los indicadores de accesibilidad, que debido a su naturaleza que involucra población y oportunidades, ocurren casos donde la densidad de población en el territorio es baja y las oportunidades son relativamente altas, lo que genera valores muy altos. El bienestar derivado de estas oportunidades es decreciente. Esto implica que una unidad adicional de oportunidades es más valiosa cuando el punto de partida es más bajo, que cuando hay exceso de oportunidades. Estas razones llevan a aplicar una suavización por raiz cúbica a la serie de datos de accesibilidad antes de normalizarla.</p>
<p>La normalización implica expresar los datos en una escala de valores entre 0 y 1 y se consigue al asociar el valor 0 y 1 a los valores mínimos y máximos de la serie.</p>
<p>Una vez que los indicadores fueron suavizados y normalizados se procede a consolidarlos a nivel de dimensión. Este proceso se realiza mediante promedio simple, promedio ponderado o algoritmos de agregación específicos. A continuación, se menciona y explica el método de agregación de cada dimensión.</p>
<ul>
<li><p><strong>Dimensión Socioeconómica</strong>: Promedio simple.</p></li>
<li><p><strong>Dimensión Ambiental</strong>: Índice de Mazziota Paretto (MPI).</p></li>
<li><p><strong>Dimensión Seguridad</strong>: Ponderación por gravedad del hecho delictivo.</p></li>
<li><p><strong>Dimensión de Accesibilidad</strong>: Promedio Simple.</p></li>
</ul>
<p>El método de agregación de Mazziota Paretto <span class="citation" data-cites="mazziottaGeneralizedNoncompensatoryComposite2016">(<a href="references.html#ref-mazziottaGeneralizedNoncompensatoryComposite2016" role="doc-biblioref">Mazziotta and Pareto 2016</a>)</span> es procedimiento no compensatorio y de simple cálculo. Este implica castigar la variabilidad en las series de datos originales, y se expresa como un promedio castigado por varianza. Esto implica que valores más altos pueden ser castigados por que la serie subyacente de datos presenta alta variabilidad, series con valores muy altos y muy bajos que se promedian en un valor medio. Este método castiga esta variabilidad, y con esto castiga la sustitución entre indicadores. En particular, en la dimensión ambiental, un mayor nivel de cobertura vegetal no compensa por tener inviernos muy fríos y veranos muy calurosos. y viceversa.</p>
<p>La ponderación por gravedad del hecho delictivo implica que la inseguridad generada por delitos graves se pondera con el doble de importancia con la inseguridad de delitos leves.</p>
</section>
<section id="consolidación-de-indicador-compuesto" class="level3" data-number="6.3.3">
<h3 data-number="6.3.3" class="anchored" data-anchor-id="consolidación-de-indicador-compuesto"><span class="header-section-number">6.3.3</span> Consolidación de Indicador Compuesto</h3>
<p>Finalmente, una vez que se cuenta con las dimensiones consolidadas se procede a generar el indicador de bienestar. Este es un promedio ponderado de cada dimensión proporcional al número de indicadores en cada dimensión.</p>
</section>
<section id="análisis-de-cluster" class="level3" data-number="6.3.4">
<h3 data-number="6.3.4" class="anchored" data-anchor-id="análisis-de-cluster"><span class="header-section-number">6.3.4</span> Análisis de Cluster</h3>
<p>Con el indicador ya calculado, es posible realizar un análisis de cluster espacial. Esto se hace usando el Índice de Moran Local, el cual tiene la siguente expresión:</p>
<p><span class="math display">\[
I_i = c.z_i \sum_jw_{ij}z_j
\]</span></p>
<p>Donde <span class="math inline">\(I_i\)</span> representa el valor del índice en la locación <span class="math inline">\(i\)</span> , <span class="math inline">\(c.\)</span> es una constante, <span class="math inline">\(z_i\)</span> es el valor de la variable analizada en la locación <span class="math inline">\(i\)</span> , mientras que <span class="math inline">\(w_{ij}\)</span> es la relación de vecindad existente entre la locación <span class="math inline">\(i\)</span> y la locación <span class="math inline">\(j\)</span>.</p>
<p>Al analizar este índice en los datos se obtiene una expresión de su variabilidad, y con esto una medida de la significancia estadística. La detección de cluster implica un proceso de identificar si el valor de la locación <span class="math inline">\(i\)</span> está sobre o bajo el promedio, y si los vecinos están sobre o bajo el promedio, evaluando si es significativa esta magnitud.</p>
<p>El resultado de esto son los llamados <strong>Territorios de Bienestar</strong>, locaciones de valores altos rodeados de valores altos (identificados como zonas de alto bienestar) y zonas de valores bajos rodeados de valores bajos. Este análisis permite identificar la población que cuenta con mayores oportunidades de bienestar en el territorio, identificando las zonas necesarias para la generación de acciones a ejecutar.</p>
</section>
</section>
<section id="aplicación" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="aplicación"><span class="header-section-number">6.4</span> Aplicación</h2>
<p>Para demostrar los procesos relacionados a la consolidación del indicador final, trabajaremos con la ciudad de Valdivia.</p>
<p>Comenzamos por configurar el entorno de trabajo, cargando librerías y funciones internas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/conf_consolidate.R"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="st">"rgdal_show_exportToProj4_warnings"</span><span class="ot">=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Adicionalmente a esto es necesario cargar ciertos parámetros que facilitan el flujo de trabajo, vinculando nombres de variables con sus indicadores y poblaciones relavantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># iteradores</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>iterador <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/excel/indice_accesibilidad_22.csv"</span>, <span class="at">col_types =</span>  readr<span class="sc">::</span><span class="fu">cols</span>())</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>iterador_soc <span class="ot">&lt;-</span>iterador <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(abrev_ind, pob_rev))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="st">'data/json/dim_var.json'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">lapply</span>(vars, toupper)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Por ejemplo, el elemento <code>iterador</code> resume el nombre, abreviaturas, población relevante y unidad de medida, entre otros elementos, de cada indicador:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>iterador</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 27 × 13
   nombre    abrev_insumo abrev_ind nombre_grafico pob_rev proposito oportunidad
   &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;      
 1 Cultura   icul         icul      Indicador de … person… libre     area       
 2 Area Ver… iav          iav       Indicador de … person… libre     area       
 3 Salud     isal         isal      Indicador de … person… hacer     area       
 4 Deportes  idep         idep      Indicador de … person… libre     area       
 5 Servicio… iser         iser      Indicador de … person… hacer     area       
 6 Educacion ise          ise       Indicador de … e4a18   hacer     matriculas 
 7 Cobertur… icv          ICV       Indicador de … AREA    &lt;NA&gt;      &lt;NA&gt;       
 8 Amplitud… iata         IATA      Indicador de … AREA    &lt;NA&gt;      &lt;NA&gt;       
 9 &lt;NA&gt;      iej          IEJ       Indicador de … person… &lt;NA&gt;      &lt;NA&gt;       
10 &lt;NA&gt;      irh          IRH       Indicador de … person… &lt;NA&gt;      &lt;NA&gt;       
# ℹ 17 more rows
# ℹ 6 more variables: unidad &lt;chr&gt;, achurado &lt;chr&gt;, archivo &lt;chr&gt;,
#   colores &lt;chr&gt;, itera_grafico &lt;dbl&gt;, itera_accesibilidad &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Por otro lado, <code>iterador_soc</code> resume la población relevante de cada indicador:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>iterador_soc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 27 × 2
   abrev_ind pob_rev 
   &lt;chr&gt;     &lt;chr&gt;   
 1 icul      personas
 2 iav       personas
 3 isal      personas
 4 idep      personas
 5 iser      personas
 6 ise       e4a18   
 7 ICV       AREA    
 8 IATA      AREA    
 9 IEJ       personas
10 IRH       personas
# ℹ 17 more rows</code></pre>
</div>
</div>
<p>Por último, <code>vars</code> es un diccionario, guardado con la extensión <code>json</code> que resume el listado de indicadores por dimensión:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>vars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$acc
[1] "ICUL" "IAV"  "ISAL" "IDEP" "ISER" "ISE" 

$seg
[1] "IGPR" "IGPE" "ILPE" "ILPR"

$amb
[1] "IATA" "ICV" 

$soc
[1] "IEJ" "IRH" "IEM" "IPJ" "ISV" "IVI"</code></pre>
</div>
</div>
<p>Con esto podemos cargar los datos de las manzanas de la ciudad, ya que cuentan con la información de indicadores calculados. Estos datos de entrada al proceso muestran los indicadores en su unidad de medida original. Por ejemplo <code>IEJ</code> está expresado en años promedio por jefe de hogar, o <code>IATA</code> en diferencia de grados celcius.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mzs <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/mz_vld.rds"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mzs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,842
Columns: 35
$ ID_MANZ    &lt;chr&gt; "14101041005003", "14101041005002", "14101041001007", "1410…
$ MANZ_EN    &lt;chr&gt; "URBANO", "URBANO", "URBANO", "URBANO", "URBANO", "URBANO",…
$ NOM_COM    &lt;chr&gt; "VALDIVIA", "VALDIVIA", "VALDIVIA", "VALDIVIA", "VALDIVIA",…
$ COD_COM    &lt;int&gt; 14101, 14101, 14101, 14101, 14101, 14101, 14101, 14101, 141…
$ NOM_REG    &lt;chr&gt; "REGIÓN DE LOS RÍOS", "REGIÓN DE LOS RÍOS", "REGIÓN DE LOS …
$ COD_REG    &lt;int&gt; 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,…
$ NOM_PROV   &lt;chr&gt; "VALDIVIA", "VALDIVIA", "VALDIVIA", "VALDIVIA", "VALDIVIA",…
$ COD_PROV   &lt;int&gt; 141, 141, 141, 141, 141, 141, 141, 141, 141, 141, 141, 141,…
$ ZONA       &lt;chr&gt; "14101041005", "14101041005", "14101041001", "14101041005",…
$ ID_MANZCIT &lt;chr&gt; "14101041005003001", "14101041005002001", "1410104100100700…
$ AREA       &lt;dbl&gt; 629538.019, 18760.191, 261662.458, 87593.359, 67409.232, 98…
$ TOTAL_V    &lt;dbl&gt; 200, 18, 113, 18, 12, 117, 32, 36, 21, 68, 11, 18, 16, 24, …
$ HOG_N      &lt;dbl&gt; 181, 18, 90, 17, 13, 107, 31, 34, 21, 63, 11, 16, 16, 18, 1…
$ PERSONAS   &lt;dbl&gt; 610, 53, 234, 70, 36, 326, 96, 93, 50, 166, 41, 47, 59, 59,…
$ E4A18      &lt;dbl&gt; 180, 17, 32, 15, 10, 70, 26, 17, 12, 31, 9, 10, 9, 14, 9, 1…
$ E15A24     &lt;dbl&gt; 87, 6, 42, 16, 4, 33, 18, 15, 5, 25, 9, 5, 9, 4, 4, 7, 6, 5…
$ IEJ        &lt;dbl&gt; 12.5, 12.9, 11.7, 16.5, 15.1, 15.2, 14.9, 15.1, 14.8, 14.1,…
$ IRH        &lt;dbl&gt; 0.9171271, 0.8888889, 0.8666667, 0.8823529, 1.0000000, 0.90…
$ IEM        &lt;dbl&gt; 0.9473684, 0.9629630, 0.9633028, 0.9642857, 0.9473684, 0.97…
$ IPJ        &lt;dbl&gt; 0.9195402, 0.8333333, 0.8571429, 1.0000000, 1.0000000, 0.69…
$ ISV        &lt;dbl&gt; 0.9636364, 0.9494949, 0.9839099, 1.0000000, 0.9242424, 0.96…
$ IVI        &lt;dbl&gt; 0.8666667, 0.8518519, 0.9911504, 0.9814815, 1.0000000, 0.92…
$ IATA       &lt;dbl&gt; 12.73768, 13.12594, 14.70082, 14.52768, 13.83234, 14.82930,…
$ ICV        &lt;dbl&gt; 85.498924, 75.110745, 42.113563, 61.373270, 96.926633, 3.82…
$ ICUL       &lt;dbl&gt; 0.03824028, 0.03840730, 0.16971080, 0.03342802, 0.03601819,…
$ IAV        &lt;dbl&gt; 6.199992, 6.078348, 17.908603, 5.244341, 5.758565, 6.583388…
$ ISAL       &lt;dbl&gt; 0.09752876, 0.10294934, 0.34112378, 0.08753293, 0.09292684,…
$ IDEP       &lt;dbl&gt; 0.4406985, 0.5156391, 1.3661514, 0.3848369, 0.4149036, 0.84…
$ ISER       &lt;dbl&gt; 0.7157770, 0.7172876, 2.0544744, 0.6498410, 0.6855541, 0.66…
$ ISE        &lt;dbl&gt; 0.12599117, 0.14058786, 0.74424252, 0.09448714, 0.11115414,…
$ IGPE       &lt;dbl&gt; 0.9466, 0.9141, 0.2755, 0.9790, 0.9182, 0.9042, 0.8685, 0.8…
$ IGPR       &lt;dbl&gt; 0.9353, 0.8960, 0.1425, 0.9746, 0.8918, 0.8809, 0.8259, 0.8…
$ ILPE       &lt;dbl&gt; 0.9600, 0.9362, 0.5936, 0.9838, 0.9302, 0.9256, 0.8892, 0.8…
$ ILPR       &lt;dbl&gt; 0.9763, 0.9634, 0.7650, 0.9892, 0.9705, 0.9735, 0.9568, 0.9…
$ geometry   &lt;POLYGON [°]&gt; POLYGON ((-73.21897 -39.788..., POLYGON ((-73.21784…</code></pre>
</div>
</div>
<p>Al visualizar estas manzanas se distingue el sector urbano de Valdivia, además la zona costera de Niebla.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mzs) <span class="sc">+</span> <span class="fu">tm_borders</span>() <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">title=</span><span class="st">"Valdivia: Manzanas Urbanas"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="consolidacion_files/figure-html/cons-viz-mzs-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>El proceso comienza por identificar aquellas manzanas cuyos valores poblacionales son cero, lo que implica indefinición de valores en indicadores poblacionales (accesibilidad o socioeconómicos). Esto es prerequisito para imputar valores de indicadores a partir sus vecinos. Esto se logra mediante la interpolación por vecinos cercanos. El código indica los grupos de indicadores que comparten ocurrencia de valores indefinidos (o <code>NA</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># identificar y crear valores NA y luego interpolar</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>mz_imputado <span class="ot">&lt;-</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  mzs <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">makeNA</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">imputarIdw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "(ISV$|IVI$)"                         "(IRH$|ICUL$|IAV$|ISAL$|IDEP$|ISER$)"
[3] "(ISE$)"                             
[1] "ISV"
[1] "IRH"
[1] "ISE"</code></pre>
</div>
</div>
<p>Una vez que se cuenta con informaciones válidas sin datos perdidos en todas las observaciones, se procede a consolidar las dimensiones. Este proceso implica suavizar los indicadores de accesibilidad (dada su naturaleza propensa a outliers y el rendimiento decreciente de bienestar del acceso a servicios). Además de esto, se normalizan los indicadores para que se expresen en la misma escala, entre 0 y 1. Además, se agregan los indicadores pertenecientes a cada dimensión.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mz_c_dimensiones <span class="ot">&lt;-</span> <span class="fu">consolidarDimensiones</span>(<span class="at">manzanas_c_indicador =</span>  mz_imputado)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>El detalle de este proceso se puede encontrar a continuación. Tanto la dimensión socioeconómica como accesibilidad son el resultado de promediar sus componentes normalizados (y suavizados en accesibilidad). Mientras que la dimensión de seguridad le da el doble de relevancia a los delitos graves, y la dimensión ambiental requiere normalizar y además invertir los valores de amplitud térmica (cosa de que la menor amplitud sea asociada positivamente al bienestar). Está última dimensión se agrega por MPI, por lo que se castiga además sus desviaciones estandar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r fold-hide code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Funcion que consolida dimensiones</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>consolidarDimensiones <span class="ot">&lt;-</span> <span class="cf">function</span>(manzanas_c_indicador){</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculo de dimensiones por separado</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  dim_amb <span class="ot">&lt;-</span> <span class="fu">dimensionAmb</span>(manzanas_c_indicador)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  dim_acc <span class="ot">&lt;-</span> <span class="fu">dimensionAcc</span>(manzanas_c_indicador)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  dim_soc <span class="ot">&lt;-</span> <span class="fu">dimensionSoc</span>(manzanas_c_indicador)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  dim_seg <span class="ot">&lt;-</span> <span class="fu">dimensionSeg</span>(manzanas_c_indicador)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># consolidacion</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  tbl_dim <span class="ot">&lt;-</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    manzanas_c_indicador <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(ID_MANZCIT) <span class="sc">%&gt;%</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="fu">transmute</span>(dim_acc, ID_MANZCIT, dim_acc)) <span class="sc">%&gt;%</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="fu">transmute</span>(dim_soc, ID_MANZCIT, dim_soc)) <span class="sc">%&gt;%</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="fu">transmute</span>(dim_amb, ID_MANZCIT, dim_amb)) <span class="sc">%&gt;%</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="fu">transmute</span>(dim_seg, ID_MANZCIT, dim_seg)) </span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># resultado</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  m_dim <span class="ot">&lt;-</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    manzanas_c_indicador <span class="sc">%&gt;%</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(tbl_dim, <span class="at">by =</span> <span class="st">'ID_MANZCIT'</span>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># retorno</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(m_dim)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co"># funcion constructora de consolidaciones:</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co"># selecciona variables, aplica suavizacion y normaliza</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>dimension <span class="ot">&lt;-</span> <span class="cf">function</span>(m_imp,dim,<span class="at">smooth =</span> <span class="st">'~ .x'</span>){</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># seleccion de variables</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>  dim_selection <span class="ot">&lt;-</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    m_imp <span class="sc">%&gt;%</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(ID_MANZCIT, <span class="fu">all_of</span>(vars[[dim]])) <span class="co"># uso de diccionario de dimensiones</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># suavizacion</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  smoothed_dim <span class="ot">&lt;-</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    dim_selection <span class="sc">%&gt;%</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(vars[[dim]]), <span class="fu">as.formula</span>(smooth)))</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># normalizacion y consruccion de dimension</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>  scaled_dim <span class="ot">&lt;-</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>    smoothed_dim <span class="sc">%&gt;%</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># normalizacion</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(vars[[dim]]), <span class="sc">~</span> <span class="fu">minmax</span>(.x))) <span class="sc">%&gt;%</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># promedio dimensiones</span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">paste0</span>(<span class="st">'dim_'</span>,dim)) <span class="sc">:</span><span class="er">=</span> <span class="fu">mean</span>(<span class="fu">c_across</span>(<span class="fu">all_of</span>(vars[[dim]])))) <span class="sc">%&gt;%</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># normaliza promedio de dimensiones</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">paste0</span>(<span class="st">'dim_'</span>,dim)) <span class="sc">:</span><span class="er">=</span> <span class="fu">minmax</span>(<span class="sc">!!</span><span class="fu">sym</span>(<span class="fu">paste0</span>(<span class="st">'dim_'</span>,dim))))</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a><span class="co"># dimension socioeconomica, no suaviza</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>dimensionSoc <span class="ot">&lt;-</span> <span class="cf">function</span>(manzanas_c_indicador){</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dimension</span>(manzanas_c_indicador, <span class="st">'soc'</span>)</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a><span class="co"># dimension accesibiliadad, suaviza por raiz cubica</span></span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>dimensionAcc <span class="ot">&lt;-</span> <span class="cf">function</span>(manzanas_c_indicador){</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dimension</span>(manzanas_c_indicador, <span class="st">'acc'</span>, <span class="at">smooth =</span> <span class="st">'~ .x ** (1/3) '</span>)</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a><span class="co"># dimension seguridad, pondera por 2 delitos graves</span></span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>dimensionSeg <span class="ot">&lt;-</span> <span class="cf">function</span>(manzanas_c_indicador){</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># variables</span></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>  dim_seg_vars <span class="ot">&lt;-</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>    manzanas_c_indicador <span class="sc">%&gt;%</span></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(ID_MANZCIT, <span class="fu">all_of</span>(vars<span class="sc">$</span>seg))</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dimension seguridad</span></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>  dim_seg <span class="ot">&lt;-</span></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>    dim_seg_vars <span class="sc">%&gt;%</span></span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(vars<span class="sc">$</span>seg), <span class="sc">~</span> <span class="dv">1</span> <span class="sc">-</span> .x)) <span class="sc">%&gt;%</span> <span class="co"># invertir</span></span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">matches</span>(<span class="st">"IG|grv"</span>), <span class="sc">~</span> .x <span class="sc">*</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="co"># grave pondera doble</span></span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowwise</span>(ID_MANZCIT) <span class="sc">%&gt;%</span></span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">dim_seg =</span> <span class="fu">sum</span>(<span class="fu">c_across</span>(<span class="fu">all_of</span>(vars<span class="sc">$</span>seg)))) <span class="sc">%&gt;%</span> <span class="co"># suma</span></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">dim_seg =</span> <span class="fu">minmax</span>(dim_seg)) <span class="sc">%&gt;%</span> <span class="co"># normaliza</span></span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">matches</span>(<span class="st">"IG|grv"</span>), <span class="sc">~</span> .x <span class="sc">/</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="co"># des-ponderar</span></span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(vars<span class="sc">$</span>seg), <span class="sc">~</span> <span class="dv">1</span> <span class="sc">-</span> .x)) <span class="sc">%&gt;%</span> <span class="co"># des-invertir</span></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">dim_seg =</span> <span class="dv">1</span> <span class="sc">-</span> dim_seg)</span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a><span class="co"># dimension ambiental; invierte IATA y consolida por MPI</span></span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a>dimensionAmb <span class="ot">&lt;-</span> <span class="cf">function</span>(mz) {</span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a>  <span class="co"># variables</span></span>
<span id="cb15-90"><a href="#cb15-90" aria-hidden="true" tabindex="-1"></a>  amb <span class="ot">=</span> <span class="fu">select</span>(mz, <span class="fu">matches</span>(<span class="st">'IATA|ICV'</span>)) <span class="sc">%&gt;%</span> <span class="fu">st_drop_geometry</span>()</span>
<span id="cb15-91"><a href="#cb15-91" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-92"><a href="#cb15-92" aria-hidden="true" tabindex="-1"></a>  <span class="co"># preoproc amb</span></span>
<span id="cb15-93"><a href="#cb15-93" aria-hidden="true" tabindex="-1"></a>  amb_norm <span class="ot">&lt;-</span></span>
<span id="cb15-94"><a href="#cb15-94" aria-hidden="true" tabindex="-1"></a>    amb <span class="sc">%&gt;%</span></span>
<span id="cb15-95"><a href="#cb15-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">IATA =</span> <span class="fu">abs</span>(IATA)) <span class="sc">%&gt;%</span></span>
<span id="cb15-96"><a href="#cb15-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">minmax</span>(.x))) <span class="sc">%&gt;%</span></span>
<span id="cb15-97"><a href="#cb15-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">IATA =</span> <span class="dv">1</span> <span class="sc">-</span> IATA)</span>
<span id="cb15-98"><a href="#cb15-98" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-99"><a href="#cb15-99" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb15-100"><a href="#cb15-100" aria-hidden="true" tabindex="-1"></a>  mpi_amb <span class="ot">=</span> <span class="fu">mpi_correct</span>(amb_norm) <span class="sc">%&gt;%</span> <span class="fu">minmax</span>()</span>
<span id="cb15-101"><a href="#cb15-101" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-102"><a href="#cb15-102" aria-hidden="true" tabindex="-1"></a>  dim_amb <span class="ot">&lt;-</span></span>
<span id="cb15-103"><a href="#cb15-103" aria-hidden="true" tabindex="-1"></a>    mz <span class="sc">%&gt;%</span></span>
<span id="cb15-104"><a href="#cb15-104" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-105"><a href="#cb15-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transmute</span>(</span>
<span id="cb15-106"><a href="#cb15-106" aria-hidden="true" tabindex="-1"></a>      ID_MANZCIT,</span>
<span id="cb15-107"><a href="#cb15-107" aria-hidden="true" tabindex="-1"></a>      <span class="at">dim_amb =</span> mpi_amb</span>
<span id="cb15-108"><a href="#cb15-108" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-109"><a href="#cb15-109" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-110"><a href="#cb15-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dim_amb)</span>
<span id="cb15-111"><a href="#cb15-111" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-112"><a href="#cb15-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-113"><a href="#cb15-113" aria-hidden="true" tabindex="-1"></a><span class="co"># detalle calculo MPI</span></span>
<span id="cb15-114"><a href="#cb15-114" aria-hidden="true" tabindex="-1"></a>mpi_correct <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl, <span class="at">penalty =</span> <span class="st">"POS"</span>) {</span>
<span id="cb15-115"><a href="#cb15-115" aria-hidden="true" tabindex="-1"></a>  <span class="co"># combina todas las variables de la tabla</span></span>
<span id="cb15-116"><a href="#cb15-116" aria-hidden="true" tabindex="-1"></a>  x_num <span class="ot">&lt;-</span> tbl</span>
<span id="cb15-117"><a href="#cb15-117" aria-hidden="true" tabindex="-1"></a>  Ma <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(x_num)</span>
<span id="cb15-118"><a href="#cb15-118" aria-hidden="true" tabindex="-1"></a>  Sqm <span class="ot">&lt;-</span> (<span class="fu">apply</span>(x_num, <span class="dv">2</span>, var))<span class="sc">^</span><span class="fl">0.5</span></span>
<span id="cb15-119"><a href="#cb15-119" aria-hidden="true" tabindex="-1"></a>  S <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb15-120"><a href="#cb15-120" aria-hidden="true" tabindex="-1"></a>  M <span class="ot">=</span> <span class="dv">100</span></span>
<span id="cb15-121"><a href="#cb15-121" aria-hidden="true" tabindex="-1"></a>  <span class="co"># corrige resta y division vectores</span></span>
<span id="cb15-122"><a href="#cb15-122" aria-hidden="true" tabindex="-1"></a>  A <span class="ot">=</span> <span class="fu">sweep</span>(x_num, <span class="dv">2</span>, Ma)</span>
<span id="cb15-123"><a href="#cb15-123" aria-hidden="true" tabindex="-1"></a>  B <span class="ot">=</span> <span class="fu">t</span>(<span class="fu">t</span>(A)<span class="sc">/</span>Sqm)</span>
<span id="cb15-124"><a href="#cb15-124" aria-hidden="true" tabindex="-1"></a>  <span class="co"># estandarizacion</span></span>
<span id="cb15-125"><a href="#cb15-125" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">=</span> B <span class="sc">*</span> S <span class="sc">+</span> M</span>
<span id="cb15-126"><a href="#cb15-126" aria-hidden="true" tabindex="-1"></a>  <span class="co"># efecto media y varianza</span></span>
<span id="cb15-127"><a href="#cb15-127" aria-hidden="true" tabindex="-1"></a>  Ma_z <span class="ot">&lt;-</span> <span class="fu">apply</span>(z, <span class="dv">1</span>, mean)</span>
<span id="cb15-128"><a href="#cb15-128" aria-hidden="true" tabindex="-1"></a>  Sqm_z <span class="ot">&lt;-</span> (<span class="fu">apply</span>(z, <span class="dv">1</span>, var))<span class="sc">^</span><span class="fl">0.5</span></span>
<span id="cb15-129"><a href="#cb15-129" aria-hidden="true" tabindex="-1"></a>  <span class="co"># coeficiente variacion</span></span>
<span id="cb15-130"><a href="#cb15-130" aria-hidden="true" tabindex="-1"></a>  cv <span class="ot">=</span> Sqm_z<span class="sc">/</span>Ma_z</span>
<span id="cb15-131"><a href="#cb15-131" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (penalty <span class="sc">==</span> <span class="st">"POS"</span>) {</span>
<span id="cb15-132"><a href="#cb15-132" aria-hidden="true" tabindex="-1"></a>    ci_mpi_est <span class="ot">&lt;-</span> Ma_z <span class="sc">-</span> Sqm_z <span class="sc">*</span> cv</span>
<span id="cb15-133"><a href="#cb15-133" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb15-134"><a href="#cb15-134" aria-hidden="true" tabindex="-1"></a>    ci_mpi_est <span class="ot">&lt;-</span> Ma_z <span class="sc">+</span> Sqm_z <span class="sc">*</span> cv</span>
<span id="cb15-135"><a href="#cb15-135" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-136"><a href="#cb15-136" aria-hidden="true" tabindex="-1"></a>  ci_mpi_est</span>
<span id="cb15-137"><a href="#cb15-137" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se pueden apreciar los resultados a continuación. La dimensión socioeconómica muestra un patrón de mejor condición en la periferia norte de la ciudad.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viz dimensiones: soc</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mz_c_dimensiones) <span class="sc">+</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_fill</span>(<span class="st">"dim_soc"</span>, <span class="at">style=</span><span class="st">"jenks"</span>, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">palette=</span>grDevices<span class="sc">::</span><span class="fu">hcl.colors</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">palette =</span>  <span class="st">"TealGrn"</span>))<span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">title=</span><span class="st">"Dimensión de Socioeconómica"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="consolidacion_files/figure-html/cns-viz-soc-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Luego la dimensión ambiental muestra un patrón muy claro donde la periferia de la zona más densa y urbana de la ciudad tiene valores más altos de confort ambiental.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viz dimensiones: ambiental</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mz_c_dimensiones) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="st">"dim_amb"</span>, <span class="at">style=</span><span class="st">"jenks"</span>, <span class="at">palette=</span><span class="st">"RdYlGn"</span>)<span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">title=</span><span class="st">"Dimensión Ambiental"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="consolidacion_files/figure-html/cns-viz-amb-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>El patrón de seguridad muestra como los delitos se concentran en el centro de la ciudad.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viz dimensiones: seguridad</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mz_c_dimensiones) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="st">"dim_seg"</span>, <span class="at">style=</span><span class="st">"jenks"</span>, <span class="at">palette=</span><span class="st">"RdYlBu"</span>)<span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">title=</span><span class="st">"Dimensión de Seguridad"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="consolidacion_files/figure-html/cns-viz-seg-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Finalmente, el acceso a servicios se encuentra fuertemente concentrado en el centro de la ciudad.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viz dimensiones: accesibilidad</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mz_c_dimensiones) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="st">"dim_acc"</span>, <span class="at">style=</span><span class="st">"jenks"</span>, <span class="at">palette=</span><span class="st">"Blues"</span>) <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">title=</span><span class="st">"Dimensión de Accesibilidad"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="consolidacion_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Estos resultados permiten ilustrar cómo la densidad de población generalmente implica mayores servicios (ya que las decisiones de inversión se concentran donde existen mercados más desarrollados y la inversión pública sigue este patrón), pero al mismo tiempo presenta costos de aglomeración, con mayores niveles de inseguridad y menor confort ambiental. Además, los patrones socioeconómicos van mostrando las decisiones o faltas de decsisión de las personas y la segregación de los grupos sociales.</p>
<p>Con las dimensiones creadas es posible calcular el indicador MBHT, donde cada dimensión recibe una ponderacion proporcional al número de indicadores que contiene:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calcula MBHT y normaliza</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>df_res <span class="ot">&lt;-</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    mz_c_dimensiones <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_all</span>(stringr<span class="sc">::</span>str_to_upper) <span class="sc">%&gt;%</span> <span class="co"># asegurarse que variables esten en mayusculas</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mbht_pondera_num_dims</span>(vars) <span class="sc">%&gt;%</span> <span class="co"># pondera de acuerdo a numero de indicadores por dimension</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">MBHT_P_BRUTO =</span> MBHT_P) <span class="sc">%&gt;%</span> <span class="co"># renombrar </span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">MBHT_P =</span> <span class="fu">minmax</span>(MBHT_P_BRUTO)) <span class="co"># normalizar</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ponderacion proporcional al numero de indicadores en cada dimension"</code></pre>
</div>
</div>
<p>El detalle de la funcion <code>mbht_pondera_num_dims()</code> puede encontrarse a continuación. Esta utiliza el diccionario <code>vars</code> para ponderar cada dimensión de acuerdo al número de indicadores que contiene.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df : sf con dimensiones</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dic_vars: lista con indicadores pertenecientes a cada dimension</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>mbht_pondera_num_dims <span class="ot">&lt;-</span> <span class="cf">function</span>(df, dic_vars, <span class="at">list_pond =</span> <span class="cn">NULL</span>, <span class="at">mbht_name =</span> <span class="st">"MBHT_P"</span>) {</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(list_pond)) {</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="st">"Ponderacion usando listado definido por usuario"</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">check_pond_dims</span>(list_pond)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        pond_dims <span class="ot">=</span> list_pond</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="st">"Ponderacion proporcional al numero de indicadores en cada dimension"</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="co"># diccionario dimensiones y variables </span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        num_ind_dims <span class="ot">=</span> <span class="fu">lapply</span>(dic_vars, length)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        total_ind <span class="ot">=</span> <span class="fu">sum</span>(<span class="fu">unlist</span>(num_ind_dims))</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        pond_dims <span class="ot">=</span> <span class="fu">lapply</span>(num_ind_dims, <span class="cf">function</span>(x) x<span class="sc">/</span>total_ind)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># proc </span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    tbl_dims <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">select</span>(sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>(df), </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>                             dplyr<span class="sc">::</span><span class="fu">all_of</span>(stringr<span class="sc">::</span><span class="fu">str_to_upper</span>(<span class="fu">paste0</span>(<span class="st">"dim_"</span>,<span class="fu">names</span>(pond_dims)))))</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    X <span class="ot">=</span> <span class="fu">as.matrix</span>(tbl_dims)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    pond_vec <span class="ot">=</span> (<span class="fu">matrix</span>(<span class="fu">unlist</span>(pond_dims)))</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    bht_p <span class="ot">=</span> X <span class="sc">%*%</span> pond_vec</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    df <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="sc">!!</span><span class="fu">sym</span>(mbht_name) <span class="sc">:</span><span class="er">=</span> <span class="fu">c</span>(bht_p))</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se aprecia como la dimensión de accesibilidad al contar con 6 indicadores de un total de 18 pondera un 33,3%, similar que la dimensión socioeconómica. Siendo la dimensión seguridad al contar con 4 indicadores de 18, pondera un 22,2% y la dimensión ambiental al contar con dos indicadores pondera un 11,1%.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># demostracion uso de diccionaro para derivar ponderadores</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>dic_vars <span class="ot">=</span> vars <span class="co"># diccionario</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>num_ind_dims <span class="ot">=</span> <span class="fu">lapply</span>(dic_vars, length) <span class="co"># numero de indicadores por dimension</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>total_ind <span class="ot">=</span> <span class="fu">sum</span>(<span class="fu">unlist</span>(num_ind_dims)) <span class="co"># total de indicadores </span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>pond_dims <span class="ot">=</span> <span class="fu">lapply</span>(num_ind_dims, <span class="cf">function</span>(x) x<span class="sc">/</span>total_ind) <span class="co"># proporcion de indicadores </span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ponderacion final:</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>pond_dims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$acc
[1] 0.3333333

$seg
[1] 0.2222222

$amb
[1] 0.1111111

$soc
[1] 0.3333333</code></pre>
</div>
</div>
<p>Con esto es posible calcular las zonas de oportunidad, donde se identifican clusters de valores altos y bajos del indicador de bienestar humano.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>mz_zonas <span class="ot">&lt;-</span> <span class="fu">zonasIBT</span>(df_res, <span class="at">var_ibt =</span> <span class="st">"MBHT_P"</span>) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">TOB=</span>clusterM)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>mz_zonas<span class="sc">$</span>TOB <span class="ot">&lt;-</span> <span class="fu">factor</span>(mz_zonas<span class="sc">$</span>TOB, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Bajo"</span>, <span class="st">"Medio"</span>, <span class="st">"Alto"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>El indicador consolidado muestra cómo se van relacionando las distintas dimensiones ya calculadas generando un patrón más complejo pero que permite destacar claramente la zona norponiente de Valdivia con un alto nivel de bienestar, siendo la zona sur la que concentra menores niveles de oportunidades.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mz_zonas) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="st">"MBHT_P"</span>, <span class="at">style=</span><span class="st">"jenks"</span>, <span class="at">palette =</span><span class="st">"RdYlGn"</span>) <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">title=</span><span class="st">"Indicador Compuesto Bienestar"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="consolidacion_files/figure-html/cons-viz-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Al realizar el análisis de cluster se aprecia como Valdivia y Niebla muestran zonas de altas oportunidades de bienestar, sin embargo solo Valdivia muestra zonas donde el bienestar es bajo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">factor</span>(mz_zonas<span class="sc">$</span>TOB, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Bajo"</span>, <span class="st">"Medio"</span>, <span class="st">"Alto"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Bajo Medio  Alto 
  386  1065   391 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mz_zonas<span class="sc">$</span>TOB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Bajo Medio  Alto 
  386  1065   391 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mz_zonas) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="st">"TOB"</span>, <span class="at">palette =</span> <span class="st">"Purples"</span>) <span class="sc">+</span> <span class="fu">tm_layout</span>(<span class="at">title=</span><span class="st">"Territorios de Oportunidad"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="consolidacion_files/figure-html/cons-viz-zonas-1.png" class="img-fluid" width="672"></p>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-anselinWhatSpecialSpatial1989" class="csl-entry" role="listitem">
Anselin, Luc. 1989. <span>“What Is <span>Special About Spatial Data</span>? <span>Alternative Perspectives</span> on <span>Spatial Data Analysis</span> (89-4),”</span> April. <a href="https://escholarship.org/uc/item/3ph5k0d4">https://escholarship.org/uc/item/3ph5k0d4</a>.
</div>
<div id="ref-joint2008handbook" class="csl-entry" role="listitem">
Commission, Joint Research Centre-European et al. 2008. <em>Handbook on Constructing Composite Indicators: Methodology and User Guide</em>. <span>OECD publishing</span>.
</div>
<div id="ref-getis1999spatial" class="csl-entry" role="listitem">
Getis, Arthur. 1999. <span>“Spatial Statistics.”</span> <em>Geographical Information Systems</em> 1: 239–51.
</div>
<div id="ref-mazziottaGeneralizedNoncompensatoryComposite2016" class="csl-entry" role="listitem">
Mazziotta, Matteo, and Adriano Pareto. 2016. <span>“On a <span class="nocase">Generalized Non-compensatory Composite Index</span> for <span class="nocase">Measuring Socio-economic Phenomena</span>.”</span> <em>Social Indicators Research</em> 127 (3): 983–1003. <a href="https://doi.org/10.1007/s11205-015-0998-2">https://doi.org/10.1007/s11205-015-0998-2</a>.
</div>
<div id="ref-soto2009guia" class="csl-entry" role="listitem">
Soto de la Rosa, Humberto, and Andr’es Ricardo Schuschny. 2009. <span>“Guía Metodológica: Diseño de Indicadores Compuestos de Desarrollo Sostenible.”</span>
</div>
<div id="ref-troguSpatialCompositeIndicators2018" class="csl-entry" role="listitem">
Trogu, Daniele, and Michele Campagna. 2018. <span>“Towards <span>Spatial Composite Indicators</span>: <span>A Case Study</span> on <span>Sardinian Landscape</span>.”</span> <em>Sustainability</em> 10 (5, 5): 1369. <a href="https://doi.org/10.3390/su10051369">https://doi.org/10.3390/su10051369</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./accesibilidad.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Dimensión Accesibilidad</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>